package net.login;
import java.sql.*;
import javax.xml.parsers.*;
import java.io.*;
import org.w3c.dom.*;

public class PopulateDB {
	
public static void main(String[] args) { 
try {
	Class.forName("com.mysql.jdbc.Driver");
	Connection con = DriverManager.getConnection("jdbc:mysql://localhost:3306/sys", "root", "Hamzus1894");
	Statement st=con.createStatement();
	DocumentBuilderFactory docBuilderFactory = DocumentBuilderFactory.newInstance();
	DocumentBuilder docBuilder = docBuilderFactory.newDocumentBuilder();
	Document doc = docBuilder.parse (new File("/WEB-INF/users.xml"));
	doc.getDocumentElement().normalize();
	System.out.println ("Initial element within document is " + doc.getDocumentElement().getNodeName());
	NodeList listOfUsers = doc.getElementsByTagName("user");
for(int s=0; s<listOfUsers.getLength(); s++){
	Node firstUserNode = listOfUsers.item(s);
	
	if(firstUserNode.getNodeType() == Node.ELEMENT_NODE){
	Element firstUserElement = (Element)firstUserNode;
	NodeList usernameList = firstUserElement.getElementsByTagName("username");
	Element usernameElement =(Element)usernameList.item(0);
	
	NodeList textFNList = usernameElement.getChildNodes();
	String username=((Node)textFNList.item(0)).getNodeValue().trim();
	
	NodeList emailList = firstUserElement.getElementsByTagName("email");
	Element emailElement =(Element)emailList.item(0);
	
	NodeList textLNList = emailElement.getChildNodes();
	String email= ((Node)textLNList.item(0)).getNodeValue().trim();
	
	NodeList passwordList = firstUserElement.getElementsByTagName("password");
	Element passwordElement =(Element)passwordList.item(0);
	
	NodeList textPNList = passwordElement.getChildNodes();
	String password= ((Node)textPNList.item(0)).getNodeValue().trim();
	
	int i=st.executeUpdate("insert into user(username,email,password) values('"+username+"','"+email+"','"+password+"')");
	}
}
	System.out.println("Data is successfully inserted!");
	}catch (Exception err) {
	System.out.println(" " + err.getMessage ());
	}
	}
}



    
    

